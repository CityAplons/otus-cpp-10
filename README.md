# bulk cmd task

### Building

```bash
mkdir -p build && cd build/
cmake -DCMAKE_BUILD_TYPE=Release ../
cmake --build .
```

You may add a `-DMAKE_PACKAGE=<OFF|ON>` to disable or enable packages of a project (it's enabled by default).

### Running

```
# Server side, deamonize
./bulk_server -s 3 -p 9000 &

# Client side
seq 0 39 | nc localhost 9000 & seq 40 80 | nc localhost 9000
```

## Условие

Цель – переработать Задание 9 так, чтобы ввод данных осуществлялся по сети. Необходимо разработать асинхронный сервер, работающий с протоколом, аналогичным консоли. Сервер принимает команды построчно. Дальнейшая обработка остаётся без изменений – вывод в консоль и файлы, статический блоки и блоки динамического размера. В качестве библиотеки сетевого взаимодействия следует использовать библиотеку Boost.ASIO (используем асинхронные возможности). Поскольку не предполагается отправка данных от сервера клиенту в ответ на команды, основное взаимодействие будет вокруг методов async_read и async_accept.

Порядок запуска:

```bash
bulk_server <port> <bulk_size>
```

* port – номер tcp порта для входящих соединений. Соединения должны обслуживаться с
  произвольных интерфейсов
* bulk_size – уже знакомый размер блока команд.

Не должно быть искусственных ограничений на количество одновременно подключенных клиентов. Команды из статических блоков, полученные из разных соединений, должны смешиваться между собой. Однако команды из динамических блоков (ограниченные символами `{` и `}` ) из разных соединений смешиваться не должны.

## Требования к реализации

Результатом работы должен стать исполняемый файл bulk_server, который находится в пакете bulk_server. Специальных усилий по демонизации сервера выполнять не стоит – сразу после запуска сервер может не возвращать управление вплоть до принудительного завершения.

## Самоконтроль

Задание считается выполненным успешно, если после установки пакета и запуска с тестовыми данными вывод соответствует описанию Задания 9. Будет отмечена способность не терять команды, полученные непосредственно перед закрытием соединения клиентом
